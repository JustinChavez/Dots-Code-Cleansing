function index_ = taskDiscrim3afcDots(varargin)
%Dots task for 3afc motion discrimination, near accelerating PF shoulder
%   index_ = taskDiscrim3afcDots(varargin)
%
%   no eyetracker
%   lpHID choices
%
%   varargin gets passed to dXtask/set via rAdd.
%
%   index_ specifies the new instance in ROOT_STRUCT.dXtask

% Copyright 2006 by Benjamin Heasly
%   University of Pennsylvania

arg_dXtc = { ...
    'name',         {'dot_coh', 'dot_dir'}, ...
    'values',       {[0 1.6 3.2 6.4 12.8 25.6], [0, 180]}, ...
    'ptr',          {{'dXdots', 1, 'coherence'}, {'dXdots', 1, 'direction'}}};

arg_dXlr = { ...
    'ptr',          {{'dXdots', 1, 'direction'}}};

% statelist options that make this task special
lcon = {'jump', {'dXlr', 1, 'value'}, [0 1], {'correct'; 'incorrect'}};
rcon = {'jump', {'dXlr', 1, 'value'}, [0 1], {'incorrect'; 'correct'}};
bcon = {'jump', {'dXlr', 1, 'value'}, [0 1], {'abstain'; 'abstain'}};
ptrs = {'dXtc', 'dXlr'};
nofp = {{}, 'dXtarget', 1};
show = 200;
arg_statelist = {lcon, rcon, bcon, ptrs, nofp, show};

name = mfilename;
cta = common_task_args;
index_ = rAdd('dXtask', 1, {'root', false, true, false}, ...
    'name',	name(5:end), ...
    'blockReps', 10, ...
    'bgColor', [0,0,0], ...
    'helpers', { ...
    'dXtc',             2,	{'current', false, true, false},	arg_dXtc; ...
    'dXlr',             1,	{'current', false, true, true},     arg_dXlr; ...
    'gXnachmias_dots',  1,  true,                               []; ...
    'gXnachmias_helpers',1, true,                               []; ...
    'gXnachmias_statelist',1,false,	arg_statelist}, ...
    cta{:}, varargin{:});