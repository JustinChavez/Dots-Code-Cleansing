function vt_ = draw(vt_)%draw method for class dXvirtualTexture: prepare graphics for display%   vt_ = draw(vt_)%%   All DotsX graphics classes have draw methods.  These prepare class%   instances for displaying graphics upon the next dXscreen 'flip'.%%   Updated class instances are always returned.%%----------Special comments-----------------------------------------------%-%%-% Overloaded draw method for class dXvirtualTexture%-% note: this routine always returns the object%-% in case it was changed%-%%----------Special comments-----------------------------------------------%%   See also draw dXvirtualTexture% Copyright 2007 by Benjamin Heasly%   University of Pennsylvania% find the visible objectsvti = find([vt_.visible] & ([vt_.windowNumber] > 0));% avoid the loopif length(vti) == 1    % draw the texture where it belongs    % might fail with empty sourceRect    Screen('DrawTexture', vt_(vti).windowNumber, vt_(vti).texture, ...        vt_(vti).sourceRect, vt_(vti).drawRect, vt_(vti).rotation, ...        vt_(vti).filterMode, vt_(vti).globalAlpha, clutX(vt_(vti).modulateColor));else    for ti = vti        % draw the texture where it belongs        % might fail with empty sourceRect        Screen('DrawTexture', vt_(ti).windowNumber, vt_(ti).texture, ...            vt_(ti).sourceRect, vt_(ti).drawRect, vt_(ti).rotation, ...            vt_(ti).filterMode, vt_(ti).globalAlpha, clutX(vt_(ti).modulateColor));    endend