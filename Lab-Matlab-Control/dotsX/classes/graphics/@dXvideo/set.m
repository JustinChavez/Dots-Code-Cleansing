function v_ = set(v_, varargin)%set method for class dXvideo: specify property values and recompute dependencies%   v_ = set(v_, varargin)%%   All DotsX classes have set methods which allow properties for one or%   more instances to be specified, and dependent values recomputed.%%   Updated class instances are always returned.%%----------Special comments-----------------------------------------------%-%%-% Overloaded set method for class dXvideo%-%%-% Assigns properties to dXvideo object(s)%-% and returns the updated object(s)%----------Special comments-----------------------------------------------%%   See also set dXvideo% Copyright 2008 Benjamin Heasly%   University of Pennsylvania% set the fields, one at a time.. no error checkingif length(v_) == 1    % set one object    for ii = 1:2:nargin-1        v_.(varargin{ii}) = varargin{ii+1};    endelse    % set many objects  ... a cell means separate    %   values given for each object; otherwise    %   the same value is set for all objects    inds=ones(size(v_));    for ii = 1:2:nargin-1        % change it        if iscell(varargin{ii+1}) && ~isempty(varargin{ii+1})            [v_.(varargin{ii})] = deal(varargin{ii+1}{:});        else            [v_.(varargin{ii})] = deal(varargin{ii+inds});        end    endend% loop. ugh.for ii = 1:length(v_)    % make sure visible is logical    v_(ii).visible = logical(v_(ii).visible);    % make sure asyncLoad and loop are NOT logical    %   Screen expects double arguments    v_(ii).asyncLoad = double(v_(ii).asyncLoad);    v_(ii).loop = double(v_(ii).loop);    % get absolute path top file    absFile = fullfile(v_(ii).dir, v_(ii).file);    if exist(absFile) == 2 && isnan(v_(ii).moviePtr)        % load the video for Quicktime playback        %   get tons of info about it        [v_(ii).moviePtr, v_(ii).movieDuration, ...            v_(ii).movieFps, v_(ii).movieWidth, ...            v_(ii).movieHeight, v_(ii).movieFrameCount] = ...            Screen('OpenMovie', v_(ii).windowNumber, ...            absFile, v_(ii).asyncLoad);    endend